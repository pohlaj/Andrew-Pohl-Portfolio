/*! cube-gallery-js 2021-07-12 */

"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var CubeGallery=function t(e,i){var r=this,a=i.minHeight,i=i.margin;_classCallCheck(this,t),this.id=e,this.minHeight=a&&0<a?a:150,this.margin=i&&0<i?i:0,this.gallery=document.querySelector("#"+this.id),this.galleryWidth=0,this.images=document.querySelectorAll("#"+this.id+" img"),this.nbImages=this.images.length,this.extra=0,this.findExtraWidth(this.images[0]),this.applyStyle(),window.addEventListener("resize",function(){r.galleryWidth!=r.gallery.offsetWidth&&r.create()});function h(){l===r.nbImages&&r.create()}var l=0;this.images.forEach.call(this.images,function(t){t.complete?(l++,h()):t.addEventListener("load",function(){l++,h()},!1)})};CubeGallery.prototype.loadVariableDatas=function(){var e=this;this.galleryWidth=this.gallery.offsetWidth,this.images.forEach(function(t){t.width=Math.floor(t.naturalWidth*e.minHeight/t.naturalHeight),t.height=e.minHeight})},CubeGallery.prototype.applyStyle=function(){var t;this.gallery.style.fontSize="0",this.gallery.style.lineHeight="0",this.hasWrapper()&&(t=document.querySelectorAll("#"+this.id+" a"),this.findExtraWidth(t[0]),t.forEach(function(t){t.style.display="inline-block",t.style.position="relative"}))},CubeGallery.prototype.hasWrapper=function(){return 0<document.querySelectorAll("#"+this.id+" a").length},CubeGallery.prototype.findExtraWidth=function(t){var e=getComputedStyle(t),t=Number(e.borderLeftWidth.substr(0,e.borderLeftWidth.length-2)),e=Number(e.borderRightWidth.substr(0,e.borderLeftWidth.length-2));this.extra=this.extra+t+e},CubeGallery.prototype.generate=function(){for(var i=this,t=[],e=[],r=0,a=0;a<this.nbImages;a++){var h=this.images[a],l=null!=this.images[a+1]?this.images[a+1]:null,r=Math.floor(r+h.width);e.push(h),(null==l||Math.floor(r+l.width)>this.galleryWidth)&&(t.push(e),r=0,e=[])}return t.forEach(function(t){var e=0;t.forEach(function(t){return e=Math.floor(e+t.width)}),t.forEach(function(t){t.width=Math.floor(t.width*(t.height*i.galleryWidth/e)/t.height-2*i.margin-i.extra),t.height=Math.floor(t.height*i.galleryWidth/e-2*i.margin-i.extra),t.style.margin=i.margin+"px"})}),this},CubeGallery.prototype.create=function(){return this.loadVariableDatas(),this.generate()},exports.default=CubeGallery;